name: Test Secrets Integration

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:

jobs:
  test-secrets:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Verify SSH Private Key Secret
        run: |
          if [ -z "$SSH_KEY" ]; then
            echo "Error: SSH_PRIVATE_KEY secret is not set"
            exit 1
          fi
          echo "SSH_PRIVATE_KEY secret is properly configured"
          echo "SSH key length: ${#SSH_KEY} characters"
        env:
          SSH_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
      
      - name: Verify GPG Private Key Secret
        run: |
          if [ -z "$GPG_KEY" ]; then
            echo "Error: GPG_PRIVATE_KEY secret is not set"
            exit 1
          fi
          echo "GPG_PRIVATE_KEY secret is properly configured"
          echo "GPG key length: ${#GPG_KEY} characters"
        env:
          GPG_KEY: ${{ secrets.GPG_PRIVATE_KEY }}
      
      - name: Verify GH_TOKEN Secret
        run: |
          if [ -z "$GH_TOKEN" ]; then
            echo "Error: GH_TOKEN secret is not set"
            exit 1
          fi
          echo "GH_TOKEN secret is properly configured"
        env:
          GH_TOKEN: ${{ secrets.GH_TOKEN }}
      
      - name: Summary
        run: |
          echo "=================================="
          echo "All repository secrets verified successfully!"
          echo "  - SSH_PRIVATE_KEY: ✓"
          echo "  - GPG_PRIVATE_KEY: ✓"
          echo "  - GH_TOKEN: ✓"
          echo "=================================="
