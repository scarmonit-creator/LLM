# Traefik Deployment Environment Configuration
# Complete production-ready configuration for Traefik reverse proxy

# === TRAEFIK CORE CONFIGURATION ===
TRAEFIK_API_DASHBOARD=true
TRAEFIK_API_INSECURE=false
TRAEFIK_LOG_LEVEL=INFO
TRAEFIK_ACCESS_LOG=true

# === ENTRYPOINTS CONFIGURATION ===
TRAEFIK_HTTP_PORT=80
TRAEFIK_HTTPS_PORT=443
# Fixed: Changed from 8080 to 8081 to avoid conflict with main app
TRAEFIK_API_PORT=8081

# === SSL/TLS CONFIGURATION ===
# Let's Encrypt ACME Configuration
TRAEFIK_ACME_EMAIL=scarmonit@scarmonit.com
TRAEFIK_ACME_CA_SERVER=https://acme-v02.api.letsencrypt.org/directory
TRAEFIK_ACME_STORAGE=/data/acme.json
TRAEFIK_ACME_CHALLENGE=tlschallenge

# === DOMAIN CONFIGURATION ===
TRAEFIK_DOMAIN=scarmonit.com
TRAEFIK_API_DOMAIN=traefik.scarmonit.com

# === DOCKER PROVIDER CONFIGURATION ===
TRAEFIK_DOCKER_ENDPOINT=unix:///var/run/docker.sock
TRAEFIK_DOCKER_EXPOSE_BY_DEFAULT=false
TRAEFIK_DOCKER_NETWORK=traefik

# === SECURITY CONFIGURATION ===
TRAEFIK_API_AUTH_USER=admin
# SECURITY FIX: Use environment variable instead of hardcoded hash
# Generate with: htpasswd -nb admin your_password
# Or: echo $(htpasswd -nb admin your_password) | sed -e s/\$/\$\$/g
TRAEFIK_API_AUTH_PASSWORD=${TRAEFIK_ADMIN_PASSWORD_HASH:-$2y$10$CHANGE_THIS_DEFAULT_HASH}

# === MIDDLEWARE CONFIGURATION ===
TRAEFIK_REDIRECT_SCHEME=https
TRAEFIK_SECURITY_HEADERS=true
TRAEFIK_RATE_LIMIT=100

# === MONITORING CONFIGURATION ===
TRAEFIK_METRICS_PROMETHEUS=true
TRAEFIK_METRICS_PORT=9090
TRAEFIK_HEALTH_CHECK=true

# === FILE PROVIDER CONFIGURATION ===
TRAEFIK_FILE_PROVIDER_DIRECTORY=/etc/traefik/dynamic
TRAEFIK_FILE_PROVIDER_WATCH=true

# === CLUSTER CONFIGURATION ===
TRAEFIK_CLUSTER_MODE=false
TRAEFIK_CONSUL_ENDPOINT=consul:8500

# === PERFORMANCE TUNING ===
TRAEFIK_GRACE_TIMEOUT=30s
TRAEFIK_IDLE_TIMEOUT=180s
TRAEFIK_READ_TIMEOUT=60s
TRAEFIK_WRITE_TIMEOUT=60s

# === LOGGING CONFIGURATION ===
TRAEFIK_LOG_FILE_PATH=/var/log/traefik/traefik.log
TRAEFIK_ACCESS_LOG_FILE_PATH=/var/log/traefik/access.log
TRAEFIK_ACCESS_LOG_FORMAT=json
